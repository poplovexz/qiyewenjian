# 产品选择器更新 - 代理记账套餐显示

## ✅ 更新完成

已成功更新产品选择器组件，在"代理记账"分类下只显示代理记账套餐，而不显示单独的产品项目。

---

## 📋 主要变更

### 1. **ProductSelector.vue 组件更新**

#### 新增代理记账套餐数据
```typescript
const dailiJizhangPackages = ref<ChanpinXiangmuOption[]>([
  {
    id: 'package_1',
    xiangmu_mingcheng: '财税服务套餐',
    yewu_baojia: 2000,
    baojia_danwei: '月',
    xiangmu_beizhu: '为小微企业提供全方位财税服务的完整套餐'
  },
  {
    id: 'package_2',
    xiangmu_mingcheng: '小微企业记账套餐',
    yewu_baojia: 800,
    baojia_danwei: '月',
    xiangmu_beizhu: '专为小微企业设计的基础记账服务套餐'
  },
  {
    id: 'package_3',
    xiangmu_mingcheng: '一般纳税人记账套餐',
    yewu_baojia: 1500,
    baojia_danwei: '月',
    xiangmu_beizhu: '一般纳税人企业专业记账服务套餐'
  },
  {
    id: 'package_4',
    xiangmu_mingcheng: '高端财务管理套餐',
    yewu_baojia: 3000,
    baojia_danwei: '月',
    xiangmu_beizhu: '大中型企业全套财务管理服务套餐'
  }
])
```

#### 更新产品过滤逻辑
- **代理记账分类**：只显示套餐
- **增值服务分类**：显示增值服务产品
- **全部服务分类**：显示套餐 + 增值服务

#### 新增套餐识别函数
```typescript
const isDailiJizhangPackage = (productId: string): boolean => {
  return dailiJizhangPackages.value.some(p => p.id === productId)
}
```

#### 更新选择逻辑
- 代理记账套餐只能选择一个
- 已选择套餐后，不能再选择其他套餐
- 提示信息更新为"代理记账套餐只能选择一个"

#### 更新UI显示
- 套餐显示"代理记账套餐"标签（橙色）
- 显示套餐描述（xiangmu_beizhu）
- 价格显示为"¥金额/月"

---

### 2. **类型定义更新**

#### ChanpinXiangmuOption 接口扩展
```typescript
export interface ChanpinXiangmuOption {
  id: string
  xiangmu_mingcheng: string
  xiangmu_bianma: string
  yewu_baojia: number
  baojia_danwei: string
  banshi_tianshu: number
  fenlei_id: string
  xiangmu_beizhu?: string  // 新增：项目备注/描述
  paixu?: number           // 新增：排序
  zhuangtai?: string       // 新增：状态
}
```

---

## 🎯 功能说明

### 用户操作流程

1. **打开产品选择器**
   - 在线索报价页面点击"添加服务"

2. **选择代理记账分类**
   - 点击"代理记账"标签
   - 显示4个代理记账套餐

3. **查看套餐信息**
   - 套餐名称
   - 套餐描述
   - 价格（元/月）
   - "代理记账套餐"标签

4. **选择套餐**
   - 点击套餐卡片或勾选框
   - 只能选择一个套餐
   - 如果已选择，再选择其他套餐会提示错误

5. **确认选择**
   - 点击"确定选择"按钮
   - 套餐添加到报价单

---

## 📦 代理记账套餐列表

| 套餐名称 | 价格 | 描述 |
|---------|------|------|
| 财税服务套餐 | ¥2000/月 | 为小微企业提供全方位财税服务的完整套餐 |
| 小微企业记账套餐 | ¥800/月 | 专为小微企业设计的基础记账服务套餐 |
| 一般纳税人记账套餐 | ¥1500/月 | 一般纳税人企业专业记账服务套餐 |
| 高端财务管理套餐 | ¥3000/月 | 大中型企业全套财务管理服务套餐 |

---

## 🔄 与其他分类的对比

### 代理记账分类
- ✅ 只显示套餐
- ✅ 不显示单独的产品项目
- ✅ 只能选择一个套餐

### 增值服务分类
- ✅ 显示增值服务产品项目
- ✅ 可以选择多个产品
- ✅ 没有套餐限制

### 全部服务分类
- ✅ 显示代理记账套餐 + 增值服务产品
- ✅ 代理记账套餐只能选一个
- ✅ 增值服务可以选多个

---

## 🎨 UI 特性

### 套餐卡片样式
- **标签**：橙色"代理记账套餐"标签
- **描述**：显示套餐详细描述
- **价格**：突出显示，格式为"¥金额/月"
- **选中状态**：蓝色边框高亮

### 交互反馈
- **悬停效果**：鼠标悬停时卡片阴影加深
- **选中效果**：选中后显示蓝色边框和勾选标记
- **禁用状态**：已在报价单中的套餐显示灰色禁用状态
- **错误提示**：尝试选择多个套餐时显示警告消息

---

## 📝 注意事项

### 临时方案
当前使用的是**前端模拟数据**，套餐数据硬编码在组件中。

### 后续优化建议

1. **创建后端API**
   - 创建代理记账套餐数据表
   - 实现套餐CRUD API
   - 实现套餐与产品项目的关联关系

2. **动态加载套餐数据**
   - 从后端API获取套餐列表
   - 支持套餐的增删改查
   - 支持套餐状态管理

3. **套餐详情展示**
   - 显示套餐包含的产品项目列表
   - 显示套餐的详细说明
   - 支持套餐的自定义配置

4. **价格计算**
   - 根据套餐内容自动计算价格
   - 支持套餐折扣
   - 支持套餐组合优惠

---

## 🧪 测试建议

### 功能测试
1. ✅ 打开产品选择器
2. ✅ 切换到"代理记账"分类
3. ✅ 验证只显示4个套餐
4. ✅ 选择一个套餐
5. ✅ 尝试选择第二个套餐（应该提示错误）
6. ✅ 取消第一个套餐，选择另一个套餐
7. ✅ 确认选择，验证套餐添加到报价单
8. ✅ 切换到"增值服务"分类，验证显示产品项目
9. ✅ 切换到"全部服务"分类，验证显示套餐+产品

### 边界测试
1. ✅ 报价单中已有套餐时，再次打开选择器
2. ✅ 同时选择套餐和增值服务
3. ✅ 搜索功能是否正常工作
4. ✅ 已在报价单中的套餐是否正确禁用

---

## 🎉 总结

✅ **代理记账分类下只显示套餐**  
✅ **套餐只能选择一个**  
✅ **UI显示清晰，交互流畅**  
✅ **类型定义完整**  
✅ **代码结构清晰**  

**下一步**：
- 测试功能是否正常
- 根据需要调整套餐数据
- 后续实现后端API支持

---

**更新时间**：2025-11-06

