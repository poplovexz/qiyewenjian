<script setup lang="ts">
import { onLaunch, onShow, onHide } from "@dcloudio/uni-app";
import { useUserStore } from "@/stores/user";
import { setupRouterGuard, isLoggedIn } from "@/utils/auth";

onLaunch(() => {
  console.log("ğŸš€ App Launch");

  // æ¢å¤ç™»å½•çŠ¶æ€
  const userStore = useUserStore();
  userStore.restoreLogin();

  // è®¾ç½®è·¯ç”±æ‹¦æˆª
  setupRouterGuard();

  // æ£€æŸ¥ç™»å½•çŠ¶æ€
  if (!isLoggedIn()) {
    uni.reLaunch({ url: '/pages/login/index' });
  }
});

onShow(() => {
  console.log("ğŸ“± App Show");
});

onHide(() => {
  console.log("ğŸ”’ App Hide");
});
</script>

<style>
/* å…¨å±€æ ·å¼ */
page {
  background-color: #f5f5f5;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
}

/* é€šç”¨ç±» */
.text-primary { color: #1989fa; }
.text-success { color: #07c160; }
.text-warning { color: #fa8c16; }
.text-danger { color: #ff4d4f; }
.text-gray { color: #999999; }
</style>
