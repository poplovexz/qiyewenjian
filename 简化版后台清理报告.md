# ç®€åŒ–ç‰ˆåå°æ¸…ç†æŠ¥å‘Š

## ğŸ¯ æ¸…ç†ç›®æ ‡

ç”¨æˆ·è¦æ±‚æ¸…ç†ç®€åŒ–ç‰ˆåå°ï¼Œåªä¿ç•™å®Œæ•´ç‰ˆåå°ç³»ç»Ÿï¼Œè§£å†³åˆåŒä¹™æ–¹ä¸»ä½“é¡µé¢çš„401é”™è¯¯é—®é¢˜ã€‚

## ğŸ—‘ï¸ å·²åˆ é™¤çš„æ–‡ä»¶å’Œç›®å½•

### 1. ç®€åŒ–ç‰ˆåå°ä¸»ç›®å½•
- `packages/backend/app/` - æ•´ä¸ªç®€åŒ–ç‰ˆåå°ç›®å½•
  - `app/__init__.py`
  - `app/main.py` - ç®€åŒ–ç‰ˆä¸»åº”ç”¨æ–‡ä»¶
  - `app/utils.py` - ç®€åŒ–ç‰ˆå·¥å…·å‡½æ•°

### 2. ç®€åŒ–ç‰ˆæ•°æ®æ¨¡å—
- `app/data/` - ç®€åŒ–ç‰ˆæ•°æ®ç›®å½•
  - `__init__.py`
  - `audit_workflows.py`
  - `contracts.py` - åˆåŒç›¸å…³æ¨¡æ‹Ÿæ•°æ®
  - `customers.py`
  - `permissions.py`
  - `products.py`
  - `roles.py`
  - `users.py`

### 3. ç®€åŒ–ç‰ˆè·¯ç”±æ¨¡å—
- `app/routers/` - ç®€åŒ–ç‰ˆè·¯ç”±ç›®å½•
  - `__init__.py`
  - `audit.py`
  - `audit_rules.py`
  - `auth.py` - ç®€åŒ–ç‰ˆè®¤è¯è·¯ç”±
  - `contracts.py` - åˆåŒç›¸å…³è·¯ç”±ï¼ˆ**é—®é¢˜æ ¹æº**ï¼‰
  - `customers.py`
  - `leads.py`
  - `payments.py`
  - `permissions.py`
  - `products.py`
  - `roles.py`
  - `users.py`

### 4. ç›¸å…³æ–‡æ¡£å’Œè„šæœ¬
- `packages/backend/README_SIMPLE.md` - ç®€åŒ–ç‰ˆè¯´æ˜æ–‡æ¡£
- `packages/backend/run_server.py` - ç®€åŒ–ç‰ˆå¯åŠ¨è„šæœ¬

### 5. ç¼“å­˜æ–‡ä»¶
- `packages/backend/__pycache__/` - Pythonç¼“å­˜ç›®å½•
- `app/data/__pycache__/` - æ•°æ®æ¨¡å—ç¼“å­˜
- `app/routers/__pycache__/` - è·¯ç”±æ¨¡å—ç¼“å­˜

## ğŸ”§ å®Œæ•´ç‰ˆåå°ä¿®å¤

### 1. æ·»åŠ å¯åŠ¨ä»£ç 
ä¿®å¤äº† `packages/backend/src/main.py`ï¼Œæ·»åŠ äº†ç¼ºå¤±çš„å¯åŠ¨ä»£ç ï¼š

```python
if __name__ == "__main__":
    import uvicorn
    print("ğŸš€ å¯åŠ¨ä»£ç†è®°è´¦è¥è¿å†…éƒ¨ç³»ç»Ÿåç«¯æœåŠ¡...")
    uvicorn.run(
        "src.main:app",
        host="0.0.0.0",
        port=8000,
        reload=True,
        reload_dirs=["src"]
    )
```

### 2. éªŒè¯æœåŠ¡æ­£å¸¸è¿è¡Œ
- âœ… åå°æœåŠ¡å¯åŠ¨æˆåŠŸ
- âœ… APIæ ¹è·¯å¾„æ­£å¸¸å“åº”
- âœ… è®¤è¯ç³»ç»Ÿæ­£å¸¸å·¥ä½œ
- âœ… åˆåŒä¹™æ–¹ä¸»ä½“APIæ­£å¸¸å“åº”ï¼ˆæ— 401é”™è¯¯ï¼‰

## ğŸ“‹ é—®é¢˜æ ¹æºåˆ†æ

### åŸå§‹é—®é¢˜
ç”¨æˆ·è®¿é—® `http://localhost:5174/finance/contract-parties` æ—¶å‡ºç°å¤§é‡401é”™è¯¯ï¼š
```
GET http://localhost:8000/api/v1/contract-parties/?page=1&size=20 401 (Unauthorized)
```

### æ ¹æœ¬åŸå› 
1. **åŒåå°å†²çª**ï¼šç³»ç»Ÿä¸­åŒæ—¶å­˜åœ¨ä¸¤ä¸ªåå°æœåŠ¡
   - ç®€åŒ–ç‰ˆåå°ï¼š`packages/backend/app/` - æ— æƒé™éªŒè¯
   - å®Œæ•´ç‰ˆåå°ï¼š`packages/backend/src/` - æœ‰å®Œæ•´æƒé™éªŒè¯

2. **APIç«¯ç‚¹é—®é¢˜**ï¼šå‰ç«¯è®¿é—®çš„æ˜¯ç®€åŒ–ç‰ˆåå°çš„åˆåŒAPI
   - ç®€åŒ–ç‰ˆï¼š`app/routers/contracts.py` - æ— è®¤è¯æ£€æŸ¥
   - å®Œæ•´ç‰ˆï¼š`src/api/api_v1/endpoints/hetong_guanli/hetong_yifang_zhuti.py` - æœ‰è®¤è¯æ£€æŸ¥

3. **å¯åŠ¨è„šæœ¬ç¼ºå¤±**ï¼šå®Œæ•´ç‰ˆåå°ç¼ºå°‘å¯åŠ¨ä»£ç ï¼Œå¯¼è‡´æœåŠ¡æ— æ³•æ­£å¸¸å¯åŠ¨

## âœ… è§£å†³æ–¹æ¡ˆæ•ˆæœ

### æ¸…ç†å‰
- âŒ åˆåŒä¹™æ–¹ä¸»ä½“é¡µé¢401é”™è¯¯
- âŒ åŒåå°ç³»ç»Ÿæ··ä¹±
- âŒ ç®€åŒ–ç‰ˆAPIæ— æƒé™éªŒè¯

### æ¸…ç†å
- âœ… åˆåŒä¹™æ–¹ä¸»ä½“APIæ­£å¸¸å·¥ä½œ
- âœ… ç»Ÿä¸€ä½¿ç”¨å®Œæ•´ç‰ˆåå°
- âœ… å®Œæ•´çš„æƒé™éªŒè¯ç³»ç»Ÿ
- âœ… ç³»ç»Ÿæ¶æ„æ¸…æ™°

## ğŸ‰ éªŒè¯ç»“æœ

### APIæµ‹è¯•ç»“æœ
```bash
# 1. å¥åº·æ£€æŸ¥
GET http://localhost:8000/api/v1/
Response: {"message":"ä»£ç†è®°è´¦è¥è¿å†…éƒ¨ç³»ç»Ÿ API v1","version":"0.1.0"}

# 2. ç™»å½•æµ‹è¯•
POST http://localhost:8000/api/v1/auth/login
Response: ç™»å½•æˆåŠŸï¼Œè·å¾—token

# 3. åˆåŒä¹™æ–¹ä¸»ä½“APIæµ‹è¯•
GET http://localhost:8000/api/v1/contract-parties/?page=1&size=20
Response: {"total":0,"items":[],"page":1,"size":20}
```

### å‰ç«¯é¡µé¢çŠ¶æ€
- `http://localhost:5174/finance/contract-parties` ç°åœ¨åº”è¯¥æ­£å¸¸å·¥ä½œ
- ä¸å†å‡ºç°401é”™è¯¯å¾ªç¯
- ä½¿ç”¨å®Œæ•´ç‰ˆåå°çš„æƒé™éªŒè¯ç³»ç»Ÿ

## ğŸ“ åç»­å»ºè®®

1. **ç¡®è®¤å‰ç«¯åŠŸèƒ½**ï¼šæµ‹è¯•åˆåŒä¹™æ–¹ä¸»ä½“é¡µé¢çš„æ‰€æœ‰åŠŸèƒ½
2. **æ•°æ®åˆå§‹åŒ–**ï¼šå¦‚éœ€è¦ï¼Œå¯ä»¥æ·»åŠ ä¸€äº›æµ‹è¯•æ•°æ®
3. **æƒé™é…ç½®**ï¼šç¡®ä¿ç”¨æˆ·æœ‰åˆé€‚çš„åˆåŒç®¡ç†æƒé™
4. **ç›‘æ§æ—¥å¿—**ï¼šè§‚å¯Ÿæ˜¯å¦è¿˜æœ‰å…¶ä»–401é”™è¯¯

## ğŸ—ï¸ å½“å‰ç³»ç»Ÿæ¶æ„

ç°åœ¨ç³»ç»Ÿä½¿ç”¨ç»Ÿä¸€çš„å®Œæ•´ç‰ˆåå°ï¼š
- **åå°æœåŠ¡**ï¼š`packages/backend/src/` - å®Œæ•´çš„æƒé™éªŒè¯å’Œæ•°æ®ç®¡ç†
- **å‰ç«¯æœåŠ¡**ï¼š`packages/frontend/` - ç»Ÿä¸€è®¿é—®å®Œæ•´ç‰ˆåå°API
- **æ•°æ®åº“**ï¼šPostgreSQL - å®Œæ•´çš„æ•°æ®æ¨¡å‹å’Œå…³ç³»
- **è®¤è¯ç³»ç»Ÿ**ï¼šJWT + RBAC - å®Œæ•´çš„æƒé™æ§åˆ¶

æ¸…ç†å®Œæˆï¼ç³»ç»Ÿç°åœ¨æ›´åŠ æ¸…æ™°å’Œç¨³å®šã€‚
